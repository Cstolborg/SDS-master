---
title: 'Advanced Network Analysis: A look into Danish Elite NEtworks'
author: "Daniel S. Hain (dsh@business.aau.dk)"
date: "Updated `r format(Sys.time(), '%B %d, %Y')`"
output:
  html_notebook:
    code_folding: show
    df_print: paged
    toc: true
    toc_depth: 2
    toc_float:
      collapsed: false
    theme: flatly
---

# Danish elites

* https://github.com/antongrau/eliter
* https://magtelite.dk/data/

## Get the data

```{r}
# remotes::install_github("antongrau/soc.elite") # Somehow doesnt work
```


## first inspection

### All

```{r}
den17 <- read_csv('https://github.com/SDS-AAU/SDS-master/raw/master/00_data/networks/elite_den17.csv') 
```

```{r}
den17 %>% head()
```


```{r}
den17 %>% count(ROLE, sort = TRUE)
```


```{r}
den17 %<>% filter(ROLE %in% c('Member', 'Chairman', 'Vice chairman', 'Chief executive', 'Executive'))
```


```{r}
den17 %<>% drop_na(CVR_AFFILIATION)
```

```{r}
den17 %>% count(PERSON_ID, NAME, sort = TRUE)
```
```{r}
el <-den17 %>%
  select(PERSON_ID, AFFILIATION_ID) %>%
  left_join(den17 %>% select(PERSON_ID, AFFILIATION_ID), by = "AFFILIATION_ID") 
```

```{r}
el %<>% 
  select(-AFFILIATION_ID) %>%
  rename(from = PERSON_ID.x, 
         to = PERSON_ID.y) %>%
  filter(from != to)
```

```{r}
el %<>%
  count(from, to, name = 'weight') 
```

```{r}
el %>% 
  head()
```








```{r}
den17 %<>% add_count(PERSON_ID) %>%
  filter(n >= 2)
```

```{r}
den17 %>%
  glimpse()
```









```{r}
directors08 <- readRDS('../../00_data/networks/elite_directors08.rda') %>% as_tibble()
```

```{r}
directors08 %>% glimpse()
```

```{r}
directors08 %>% count(virksomhedsnavn, sort = TRUE)
```

```{r}
directors08 %>% count(navn, sort = TRUE)
```



